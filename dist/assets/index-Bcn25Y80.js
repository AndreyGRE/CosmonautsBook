(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})(),document.addEventListener(`DOMContentLoaded`,()=>{r(JSON.parse(localStorage.getItem(`book`)||`{}`))}),document.getElementById(`name`)?.addEventListener(`change`,e=>{let t=e.target;console.log(t.value)}),document.getElementById(`add`)?.addEventListener(`click`,()=>{let e=document.getElementById(`name`),t=document.getElementById(`job`),n=document.getElementById(`phone`);if(!e||!t||!n)return;let i=e.value,s=t.value,c=n.value,l=o(i,s,c);if(!l.isValid){a(l.error);return}let u={name:i,job:s,phone:c},d=JSON.parse(localStorage.getItem(`book`)||`{}`);d[u.name[0].toUpperCase()]||(d[u.name[0].toUpperCase()]=[]),d[u.name[0].toUpperCase()].push(u),localStorage.setItem(`book`,JSON.stringify(d)),e.value=``,t.value=``,n.value=``,a(`–£—á–∞—Å—Ç–Ω–∏–∫ –¥–æ–±–∞–≤–ª–µ–Ω`),r(d)}),document.getElementById(`clear`)?.addEventListener(`click`,()=>{localStorage.clear(),r(),a(`–ö–Ω–∏–≥–∞ –æ—á–∏—â–µ–Ω–∞`)}),document.getElementById(`local`)?.addEventListener(`click`,()=>{r(JSON.parse(localStorage.getItem(`book`)||`{}`)),console.log(localStorage)}),document.getElementById(`search`)?.addEventListener(`click`,()=>{document.querySelector(`.ModalSerch`)?.classList.add(`ModalSerch--open`)});function e(){let e=document.getElementById(`ModalSerch-content-search-panel-input`).value.toLowerCase().trim(),t=JSON.parse(localStorage.getItem(`book`)||`{}`),n=[];for(let r in t)for(let i of t[r])(i.name.toLowerCase().includes(e)||i.phone.toLowerCase().includes(e))&&n.push(i);return n}function t(r){let a=document.querySelector(`.ModalSerch-content-result`);if(a.innerHTML=``,r.length===0){a.textContent=`–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ`;return}r.forEach(r=>{let o=document.createElement(`div`);o.classList.add(`ModalSerch-content-result-item`);let s=document.createElement(`div`);s.textContent=`–ò–º—è: ${r.name}`;let c=document.createElement(`div`);c.textContent=`–í–∞–∫–∞–Ω—Å–∏—è: ${r.job}`;let l=document.createElement(`div`);l.textContent=`–¢–µ–ª–µ—Ñ–æ–Ω: ${r.phone}`;let u=document.createElement(`div`);u.classList.add(`ModalSerch-content-result-item-EditDel`);let d=document.createElement(`button`);d.textContent=`–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å ‚úèÔ∏è`,d.addEventListener(`click`,()=>n(r));let f=document.createElement(`button`);f.textContent=`–£–¥–∞–ª–∏—Ç—å üóë`,f.addEventListener(`click`,()=>{i(r),t(e())}),u.append(d,f),o.append(s,c,l,u),a.appendChild(o)})}document.getElementById(`ModalSerch-content-search-panel-btn`)?.addEventListener(`click`,()=>{if(!document.getElementById(`ModalSerch-content-search-panel-input`).value.trim()){a(`–í–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –ø–æ–∏—Å–∫–∞`);return}t(e())});function n(e){let n=document.createElement(`div`);n.classList.add(`ModalEdit`);let r=document.createElement(`input`);r.value=e.name;let i=document.createElement(`input`);i.value=e.job;let a=document.createElement(`input`);a.value=e.phone;let o=document.createElement(`button`);o.textContent=`–°–æ—Ö—Ä–∞–Ω–∏—Ç—å`;let s=document.createElement(`button`);s.textContent=`–ó–∞–∫—Ä—ã—Ç—å`,n.append(r,i,a,o,s),document.body.appendChild(n),s.addEventListener(`click`,()=>{n.remove()}),o.addEventListener(`click`,()=>{let o=JSON.parse(localStorage.getItem(`book`)||`{}`),s=e.name[0].toUpperCase();o[s]&&(o[s]=o[s].filter(t=>!(t.name===e.name&&t.phone===e.phone)),o[s].length===0&&delete o[s]);let c={name:r.value,job:i.value,phone:a.value},l=c.name[0].toUpperCase();o[l]||(o[l]=[]),o[l].push(c),localStorage.setItem(`book`,JSON.stringify(o)),n.remove();let u=document.getElementById(`ModalSerch-content-search-panel-input`).value.toLowerCase().trim(),d=[];for(let e in o)for(let t of o[e])(t.name.toLowerCase().includes(u)||t.phone.toLowerCase().includes(u))&&d.push(t);t(d)})}document.getElementById(`ModalSerch-content-close`)?.addEventListener(`click`,()=>{document.querySelector(`.ModalSerch`)?.classList.remove(`ModalSerch--open`)});function r(e){let t=document.querySelector(`.book_element`);t&&(t.innerHTML=``,e&&Object.keys(e).sort((e,t)=>e.localeCompare(t,`ru`)).forEach(n=>{let a=document.createElement(`div`);a.classList.add(`book_element_item`);let o=document.createElement(`div`);o.textContent=` ${n}`,o.classList.add(`book_element_item_key`),o.classList.add(`book_element_item_key--hover`);let s=document.createElement(`span`);s.textContent=` ‚ñº`,s.classList.add(`toggle-arrow`),o.appendChild(s);let c=document.createElement(`div`);c.classList.add(`book_element_item_value`),t.appendChild(a),a.appendChild(o),a.appendChild(c),o.addEventListener(`click`,()=>{c.classList.toggle(`book_element_item_value--open`),s.textContent=c.classList.contains(`book_element_item_value--open`)?` ‚ñ∫`:` ‚ñº`});let l=0;e[n].forEach(e=>{l+=1;let t=document.createElement(`div`);t.classList.add(`book_element_item_value_item`);let n=document.createElement(`div`);n.textContent=`–ò–º—è: ${e.name}`;let a=document.createElement(`div`);a.textContent=`–í–∞–∫–∞–Ω—Å–∏—è:${e.job}`;let o=document.createElement(`div`);o.textContent=`–ù–æ–º–µ—Ä: ${e.phone}`;let s=document.createElement(`div`);s.textContent=`üóë`,s.addEventListener(`click`,()=>{i(e),r()}),t.append(n,a,o,s),c.appendChild(t)});let u=document.createElement(`span`);u.textContent=`(${l})`,o.appendChild(u)}))}function i(e){let t=JSON.parse(localStorage.getItem(`book`)||`{}`),n=e.name[0].toUpperCase();t[n]&&(t[n]=t[n].filter(t=>!(t.name===e.name&&t.phone===e.phone)),t[n].length===0&&delete t[n],localStorage.setItem(`book`,JSON.stringify(t)))}function a(e){let t=document.querySelector(`.Modal_content`),n=document.querySelector(`.Modal`);!t||!n||(t.innerHTML=e,n.classList.add(`Modal--appears`),setTimeout(()=>{n.classList.remove(`Modal--appears`)},3e3))}function o(e,t,n){function r(e){return typeof e==`string`&&e.trim()!==``}if(!r(e))return{isValid:!1,error:`–í–≤–µ–¥–∏—Ç–µ –∏–º—è`};if(!r(t))return{isValid:!1,error:`–í–≤–µ–¥–∏—Ç–µ –¥–æ–ª–∂–Ω–æ—Å—Ç—å`};if(!r(n))return{isValid:!1,error:`–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞`};let i=e.trim();if(i.length<2||i.length>50)return{isValid:!1,error:`–ò–º—è –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ—Ç 2 –¥–æ 50 —Å–∏–º–≤–æ–ª–æ–≤`};if(!/^[a-zA-Z–∞-—è–ê-–Ø—ë–Å]+(?:[-'][a-zA-Z–∞-—è–ê-–Ø—ë–Å]+)*$/.test(i))return{isValid:!1,error:`–ò–º—è –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã, –¥–µ—Ñ–∏—Å –∏ –∞–ø–æ—Å—Ç—Ä–æ—Ñ`};let a=t.trim();if(a.length<2||a.length>100)return{isValid:!1,error:`–î–æ–ª–∂–Ω–æ—Å—Ç—å –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ—Ç 2 –¥–æ 100 —Å–∏–º–≤–æ–ª–æ–≤`};if(!/^[\p{L}\s\-.']+$/u.test(a))return{isValid:!1,error:`–î–æ–ª–∂–Ω–æ—Å—Ç—å –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã, –ø—Ä–æ–±–µ–ª—ã, –¥–µ—Ñ–∏—Å –∏ —Ç–æ—á–∫—É`};let o=n.replace(/\D/g,``),s=null;return o.length===11&&(o[0]===`7`||o[0]===`8`)?s=`+7 ${o.slice(1,4)} ${o.slice(4,7)}-${o.slice(7,9)}-${o.slice(9,11)}`:o.length===10&&(s=`+7 ${o.slice(0,3)} ${o.slice(3,6)}-${o.slice(6,8)}-${o.slice(8,10)}`),s?{isValid:!0,normalizedPhone:s}:{isValid:!1,error:`–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –≤ —Ñ–æ—Ä–º–∞—Ç–µ 71234567890 –∏–ª–∏ 81234567890`}}